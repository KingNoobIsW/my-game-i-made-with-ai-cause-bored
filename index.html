<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cluster Rush Launcher</title>
<style>
  body {
    background: #111;
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    flex-direction: column;
    font-family: Arial, sans-serif;
  }
  button {
    background: #0f0;
    border: none;
    padding: 15px 30px;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
  }
  button:hover {
    background: #3f3;
  }
</style>
</head>
<body>
  <h1>Cluster Rush Launcher</h1>
  <button id="launchBtn">Launch Game</button>

  <script>
    document.getElementById("launchBtn").addEventListener("click", function() {
      const gameTab = window.open("", "_blank");

      if (!gameTab) {
        alert("Please allow pop-ups for this to work!");
        return;
      }

      // Write the Cluster Rush HTML into the new tab
      gameTab.document.write(`
        <html lang="en-us">
          <base href="https://cdn.jsdelivr.net/gh/bubbls/clusterarchive/">
          <head>
            <meta charset="utf-8">
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <title>Unity WebGL Player | Cluster Rush</title>
            <link href="TemplateData/style.css" rel="stylesheet">
            <script src="TemplateData/UnityProgress.js" type="text/javascript"></script>
          </head>
          <body class="template">
            <div class="template-wrap clear">
              <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" style="width:100vw;height:100vh"></canvas>
            </div>
            <script type="text/javascript">
              var Module = {
                TOTAL_MEMORY: 268435456,
                backgroundColor: "#222C36",
                splashStyle: "Dark",
                dataUrl: "Release/NG.data",
                codeUrl: "Release/NG.js",
                asmUrl: "Release/NG.asm.js",
                memUrl: "Release/NG.mem",
              };
            <\/script>
            <script src="Release/UnityLoader.js"><\/script>

            <script>
              document.addEventListener("keydown", function(event) {
                if (event.key === ">") {
                  window.close();
                }
              });
            <\/script>
          </body>
        </html>
      `);
    });
  </script>
</body>
</html>
