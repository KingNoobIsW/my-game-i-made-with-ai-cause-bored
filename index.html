<!DOCTYPE html>
<html lang="en-us">
<base href="https://cdn.jsdelivr.net/gh/bubbls/clusterarchive/">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Cluster Rush (Keyboard Close & Reopen)</title>
  <style>
    body {
      margin: 0;
      background: #111;
      overflow: hidden;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
      touch-action: none;
    }
  </style>
  <link href="TemplateData/style.css" rel="stylesheet">
  <script src="TemplateData/UnityProgress.js"></script>
</head>
<body class="template">
  <div class="template-wrap clear">
    <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()"></canvas>
  </div>

  <script>
    // Unity WebGL setup
    var Module = {
      TOTAL_MEMORY: 268435456,
      backgroundColor: "#222C36",
      splashStyle: "Dark",
      dataUrl: "Release/NG.data",
      codeUrl: "Release/NG.js",
      asmUrl: "Release/NG.asm.js",
      memUrl: "Release/NG.mem",
    };

    // Load Unity WebGL
    const script = document.createElement("script");
    script.src = "Release/UnityLoader.js";
    document.body.appendChild(script);

    // Key event handling
    document.addEventListener("keydown", function(event) {
      if (event.key === ">") {
        // Try to close the tab
        window.close();

        // If blocked, show a note
        setTimeout(() => {
          alert("Browser blocked tab close (security restriction).");
        }, 200);
      } 
      else if (event.key === "<") {
        // Reopen (reload) the page
        location.reload();
      }
    });
  </script>
</body>
</html>
